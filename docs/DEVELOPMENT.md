# é–‹ç™¼æŒ‡å—

## ğŸš€ å¿«é€Ÿå•Ÿå‹•

### 1. å®‰è£ä¾è³´

ä½¿ç”¨æä¾›çš„è…³æœ¬è‡ªå‹•å®‰è£æ‰€æœ‰ä¾è³´ï¼š

**Windows:**

```cmd
install.bat
```

**macOS/Linux:**

```bash
chmod +x install.sh
./install.sh
```

**æ‰‹å‹•å®‰è£:**

```bash
npm run install:all
```

### 2. å•Ÿå‹•é–‹ç™¼æœå‹™å™¨

```bash
npm run dev
```

é€™å°‡åŒæ™‚å•Ÿå‹•ï¼š

- å‰ç«¯é–‹ç™¼æœå‹™å™¨ (http://localhost:3000)
- å¾Œç«¯ API æœå‹™å™¨ (http://localhost:3001)

### 3. é–‹å§‹é–‹ç™¼

1. ç€è¦½å™¨é–‹å•Ÿ http://localhost:3000
2. è¼¸å…¥æ‚¨çš„ Notion Integration Token
3. é–‹å§‹ä½¿ç”¨åœ–è¡¨ç”ŸæˆåŠŸèƒ½

## ğŸ“ å°ˆæ¡ˆæ¶æ§‹

```
notion-chart-generator/
â”œâ”€â”€ frontend/          # Next.js + React å‰ç«¯
â”œâ”€â”€ backend/           # NestJS å¾Œç«¯ API
â”œâ”€â”€ docs/             # å°ˆæ¡ˆæ–‡ä»¶
â””â”€â”€ é…ç½®æª”æ¡ˆ
```

## ğŸ› ï¸ é–‹ç™¼å‘½ä»¤

### æ ¹ç›®éŒ„å‘½ä»¤

```bash
npm run dev           # å•Ÿå‹•å‰å¾Œç«¯é–‹ç™¼æœå‹™å™¨
npm run build         # å»ºæ§‹æ•´å€‹å°ˆæ¡ˆ
npm run start         # å•Ÿå‹•ç”Ÿç”¢ç‰ˆæœ¬
npm run install:all   # å®‰è£æ‰€æœ‰ä¾è³´
```

### å‰ç«¯é–‹ç™¼

```bash
cd frontend
npm run dev          # é–‹ç™¼æ¨¡å¼
npm run build        # å»ºæ§‹
npm run start        # ç”Ÿç”¢æ¨¡å¼
npm run lint         # ç¨‹å¼ç¢¼æª¢æŸ¥
```

### å¾Œç«¯é–‹ç™¼

```bash
cd backend
npm run start:dev    # é–‹ç™¼æ¨¡å¼ï¼ˆè‡ªå‹•é‡å•Ÿï¼‰
npm run build        # å»ºæ§‹
npm run start:prod   # ç”Ÿç”¢æ¨¡å¼
npm run test         # æ¸¬è©¦
```

## ğŸ¯ ä¸»è¦åŠŸèƒ½å¯¦ç¾

### ç‹€æ…‹ç®¡ç† (Zustand)

- å…¨å±€ç‹€æ…‹ç®¡ç†
- Notion é€£æ¥ç‹€æ…‹
- åœ–è¡¨è¨­å®šå’Œè³‡æ–™

### API æ•´åˆ

- Notion API ä»£ç†
- è³‡æ–™è™•ç†å’Œè½‰æ›
- å¿«ç…§ç®¡ç†

### UI çµ„ä»¶

- Shadcn UI çµ„ä»¶ç³»çµ±
- éŸ¿æ‡‰å¼è¨­è¨ˆ
- é»‘ç°ç™½ä¸»é¡Œ

### åœ–è¡¨æ¸²æŸ“

- Apache ECharts æ•´åˆ
- å¤šç¨®åœ–è¡¨é¡å‹
- è‡ªè¨‚æ¨£å¼å’Œå‹•ç•«

## ğŸ”§ æŠ€è¡“ç´°ç¯€

### å‰ç«¯æŠ€è¡“æ£§

- React 18+ with TypeScript
- Next.js 14 with App Router
- TailwindCSS + Shadcn UI
- Zustand for state management
- Apache ECharts for charts
- Axios for API calls

### å¾Œç«¯æŠ€è¡“æ£§

- NestJS 10+ with TypeScript
- Express.js
- Class Validator for validation
- File-based snapshot storage
- CORS enabled

## ğŸ“ é–‹ç™¼æ³¨æ„äº‹é …

1. **TypeScript**: æ•´å€‹å°ˆæ¡ˆä½¿ç”¨ TypeScript é–‹ç™¼
2. **Lint errors**: ç›®å‰çš„ lint errors ä¸»è¦æ˜¯å› ç‚ºä¾è³´å°šæœªå®‰è£
3. **ç’°å¢ƒè®Šæ•¸**: å¾Œç«¯ä½¿ç”¨ .env æ–‡ä»¶é…ç½®
4. **CORS**: å·²é…ç½®å…è¨±å‰ç«¯å­˜å–å¾Œç«¯ API
5. **æª”æ¡ˆçµæ§‹**: éµå¾ª Next.js å’Œ NestJS æœ€ä½³å¯¦è¸

## ğŸš§ ä¸‹ä¸€æ­¥é–‹ç™¼

1. å®‰è£ä¾è³´ä¸¦è§£æ±º TypeScript éŒ¯èª¤
2. æ¸¬è©¦ Notion API æ•´åˆ
3. å®Œå–„åœ–è¡¨æ¨£å¼å’Œäº’å‹•
4. æ·»åŠ æ›´å¤šåœ–è¡¨é¡å‹
5. å„ªåŒ–æ•ˆèƒ½å’ŒéŒ¯èª¤è™•ç†
6. æ·»åŠ æ¸¬è©¦ç”¨ä¾‹

## ï¿½ å‹•æ…‹å¿«ç…§ç³»çµ±é–‹ç™¼

### ç’°å¢ƒè¨­å®š

åœ¨å¾Œç«¯ `.env` æª”æ¡ˆä¸­æ·»åŠ åŠ å¯†å¯†é‘°ï¼š

```bash
# åŠ å¯†é…ç½®
ENCRYPTION_KEY=your-strong-secret-key-here-min-32-chars
```

### é–‹ç™¼é‡é»

1. **Token å®‰å…¨æ€§**

   - Notion API Token ä½¿ç”¨ AES-256-CBC åŠ å¯†
   - ç”Ÿç”¢ç’°å¢ƒå‹™å¿…è¨­å®šå¼·åº¦è¶³å¤ çš„ `ENCRYPTION_KEY`

2. **å¿«ç…§æ¨¡å¼**

   - `static`: å‚³çµ±éœæ…‹å¿«ç…§
   - `dynamic`: å³æ™‚æŸ¥è©¢ Notion API
   - `cached`: å¿«å–æ©Ÿåˆ¶å¹³è¡¡æ•ˆèƒ½èˆ‡å³æ™‚æ€§

3. **éŒ¯èª¤è™•ç†**
   - å‹•æ…‹å¿«ç…§å¤±æ•—æ™‚è‡ªå‹•å›é€€åˆ°éœæ…‹æ¨¡å¼
   - å®Œæ•´çš„éŒ¯èª¤æ—¥èªŒè¨˜éŒ„

### API é–‹ç™¼

æ–°å¢çš„ API ç«¯é»ï¼š

- `POST /api/snapshots/query` - å»ºç«‹å‹•æ…‹å¿«ç…§
- `GET /api/snapshots/query/:id` - åŸ·è¡Œå‹•æ…‹æŸ¥è©¢
- `GET /api/snapshots/query/:id/config` - å–å¾—å¿«ç…§è¨­å®š

### å‰ç«¯æ•´åˆ

å‹•æ…‹å¿«ç…§ç›¸é—œçš„å‰ç«¯çµ„ä»¶ï¼š

- å¿«ç…§æ¨¡å¼é¸æ“‡å™¨
- å¿«å–æ™‚é–“è¨­å®š
- è‡ªå‹•å›é€€æ©Ÿåˆ¶

### å¾…å¯¦ä½œåŠŸèƒ½

- [ ] Notion API å¯¦éš›æ•´åˆ
- [ ] é€²éšå¿«å–ç­–ç•¥
- [ ] æ‰¹é‡å¿«ç…§æ“ä½œ
- [ ] å¿«ç…§ä½¿ç”¨çµ±è¨ˆ

è©³ç´°èªªæ˜è«‹åƒè€ƒ `docs/DYNAMIC-SNAPSHOTS.md`

## ï¿½ğŸ“ æŠ€è¡“æ”¯æ´

å¦‚æœé‡åˆ°å•é¡Œï¼Œè«‹æª¢æŸ¥ï¼š

1. Node.js ç‰ˆæœ¬ (éœ€è¦ 18+)
2. ä¾è³´æ˜¯å¦æ­£ç¢ºå®‰è£
3. ç’°å¢ƒè®Šæ•¸æ˜¯å¦è¨­å®š
4. Notion Token æ˜¯å¦æœ‰æ•ˆ
5. å‹•æ…‹å¿«ç…§ç³»çµ±çš„åŠ å¯†å¯†é‘°è¨­å®š
